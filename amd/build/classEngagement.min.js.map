{"version":3,"file":"classEngagement.min.js","sources":["../src/classEngagement.js"],"sourcesContent":["define(['core/modal_factory'], function(ModalFactory) {\n    return {\n        init: function () {\n\n            const container = document.querySelector('.bar-container');\n            if (!container) {\n                return;\n            }\n\n            const isTeacher = container.getAttribute('data-isteacher') === '1';\n\n            if (!isTeacher) {\n                return; // Don't attach click events for non-teachers\n            }\n\n            document.querySelectorAll('.segment').forEach(segment => {\n                segment.addEventListener('click', async function () {\n                    const json = this.getAttribute('data-students');\n                    const title = this.getAttribute('data-title') || 'Students';\n                    let students;\n\n                    try {\n                        students = JSON.parse(json);\n                    } catch (e) {\n                        students = [];\n                    }\n\n                    // Build HTML table dynamically\n                    let tableHtml = `\n                        <table class=\"table table-striped\">\n                            <thead>\n                                <tr><th>Name</th><th>Email</th></tr>\n                            </thead>\n                            <tbody>\n                    `;\n                    students.forEach(student => {\n                        tableHtml += `<tr><td>${student.fullname}</td><td>${student.email}</td></tr>`;\n                    });\n                    tableHtml += '</tbody></table>';\n\n                    try {\n                        const modal = await ModalFactory.create({\n                            title: title,\n                            body: tableHtml,\n                            type: ModalFactory.types.DEFAULT\n                        });\n\n                        modal.show();\n\n                        modal.getRoot().on('hidden.bs.modal', () => {\n                            modal.destroy();\n                        });\n                    } catch (e) {\n                        window.console.error(\"Modal creation failed:\", e);\n                    }\n                });\n            });\n        }\n    };\n});\n"],"names":["define","ModalFactory","init","container","document","querySelector","getAttribute","querySelectorAll","forEach","segment","addEventListener","async","json","this","title","students","JSON","parse","e","tableHtml","student","fullname","email","modal","create","body","type","types","DEFAULT","show","getRoot","on","destroy","window","console","error"],"mappings":"AAAAA,+CAAO,CAAC,uBAAuB,SAASC,oBAC7B,CACHC,KAAM,iBAEIC,UAAYC,SAASC,cAAc,sBACpCF,iBAI0D,MAA7CA,UAAUG,aAAa,mBAMzCF,SAASG,iBAAiB,YAAYC,SAAQC,UAC1CA,QAAQC,iBAAiB,SAASC,uBACxBC,KAAOC,KAAKP,aAAa,iBACzBQ,MAAQD,KAAKP,aAAa,eAAiB,eAC7CS,aAGAA,SAAWC,KAAKC,MAAML,MACxB,MAAOM,GACLH,SAAW,OAIXI,sRAOJJ,SAASP,SAAQY,UACbD,6BAAwBC,QAAQC,6BAAoBD,QAAQE,uBAEhEH,WAAa,6BAGHI,YAActB,aAAauB,OAAO,CACpCV,MAAOA,MACPW,KAAMN,UACNO,KAAMzB,aAAa0B,MAAMC,UAG7BL,MAAMM,OAENN,MAAMO,UAAUC,GAAG,mBAAmB,KAClCR,MAAMS,aAEZ,MAAOd,GACLe,OAAOC,QAAQC,MAAM,yBAA0BjB"}